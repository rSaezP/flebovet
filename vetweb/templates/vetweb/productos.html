{% extends 'vetweb/base.html' %}
{% load static %}

{% block title %}Equipos y Productos - Laboratorio Veterinario{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-slider product-page">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="{% static 'vetweb/img/produ.jpg' %}" class="d-block w-100" alt="FleboVet">
            <div class="carousel-caption">
                <div class="container">
                    <div class="caption-content text-start">
                        <h1>Equipos y Productos</h1>
                        <p>Innovación y calidad en diagnóstico veterinario</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container py-5">
    <div class="row g-4 justify-content-center">
        <!-- Productos Estáticos Mejorados -->
        <div class="col-md-4 mb-4">
            <div class="form-product">
                <div class="product-img-container">
                    <img src="{% static 'vetweb/img/producto1.png' %}" alt="Analizador" class="product-img">
                </div>
                <div class="product-content">
                    <h2>HV-COA 7100</h2>
                    <p>Analizador de Coagulación Veterinaria</p>
                    <div class="features">
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>Rápido y Preciso</span>
                        </div>
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>Resultados en minutos</span>
                        </div>
                    </div>
                    <div class="actions-container">
                        <button class="btn-wishlist" disabled>
                            <i class="far fa-heart"></i>
                        </button>
                        <a href="{% url 'vetweb:detalle_producto' 1 %}" class="btn-ver">Ver Detalles</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="form-product">
                <div class="product-img-container">
                    <img src="{% static 'vetweb/img/producto2.jpg' %}" alt="HV-FIA 3000" class="product-img">
                </div>
                <div class="product-content">
                    <h2>HV-FIA 3000</h2>
                    <p>Analizador de Inmunofluorescencia Cuantitativo</p>
                    <div class="features">
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>T4, TSH, Cortisol, Hormonas</span>
                        </div>
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>Resultados en 3-15 minutos</span>
                        </div>
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>Almacena 1000 resultados</span>
                        </div>
                    </div>
                    <div class="actions-container">
                        <button class="btn-wishlist" disabled>
                            <i class="far fa-heart"></i>
                        </button>
                        <a href="{% url 'vetweb:detalle_producto' 2 %}" class="btn-ver">Ver Detalles</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="form-product">
                <div class="product-img-container">
                    <img src="{% static 'vetweb/img/producto3.png' %}" alt="Pointcare PCR V1" class="product-img">
                </div>
                <div class="product-content">
                    <h2>Pointcare® PCR V1</h2>
                    <p>Analizador PCR en tiempo real</p>
                    <div class="features">
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>Extracción libre de DNA/RNA</span>
                        </div>
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>Resultados en 60 minutos</span>
                        </div>
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>6 wells de procesamiento</span>
                        </div>
                    </div>
                    <div class="actions-container">
                        <button class="btn-wishlist" disabled>
                            <i class="far fa-heart"></i>
                        </button>
                        <a href="{% url 'vetweb:detalle_producto' 3 %}" class="btn-ver">Ver Detalles</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="form-product">
                <div class="product-img-container">
                    <img src="{% static 'vetweb/img/producto4.png' %}" alt="Test Rápidos" class="product-img">
                </div>
                <div class="product-content">
                    <h2>Test Rápidos</h2>
                    <p>Diagnóstico Veterinario</p>
                    <div class="features">
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>CPV/CDV/FPV/FIV/otras pruebas</span>
                        </div>
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>Resultados en 5-10 minutos</span>
                        </div>
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>Alta sensibilidad y especificidad</span>
                        </div>
                    </div>
                    <div class="actions-container">
                        <button class="btn-wishlist" disabled>
                            <i class="far fa-heart"></i>
                        </button>
                        <a href="{% url 'vetweb:detalle_producto' 4 %}" class="btn-ver">Ver Detalles</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="form-product">
                <div class="product-img-container">
                    <img src="{% static 'vetweb/img/producto5.jpeg' %}" alt="Pointcare V3" class="product-img">
                </div>
                <div class="product-content">
                    <h2>Pointcare V3</h2>
                    <p>Analizador de Química Clínica y Electrolitos</p>
                    <div class="features">
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>Perfil Hepático y Renal</span>
                        </div>
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>Resultados en 7 minutos</span>
                        </div>
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>Pantalla táctil 4.3"</span>
                        </div>
                    </div>
                    <div class="actions-container">
                        <button class="btn-wishlist" disabled>
                            <i class="far fa-heart"></i>
                        </button>
                        <a href="{% url 'vetweb:detalle_producto' 5 %}" class="btn-ver">Ver Detalles</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Productos Dinámicos Integrados -->
        {% for producto in productos_dinamicos %}
        <div class="col-md-4 mb-4">
            <div class="form-product">
                <div class="product-img-container">
                    {% if producto.imagen %}
                        <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}" class="product-img">
                    {% else %}
                        <img src="{% static 'vetweb/img/default-product.png' %}" alt="Imagen predeterminada" class="product-img">
                    {% endif %}
                </div>
                <div class="product-content">
                    <h2>{{ producto.nombre }}</h2>
                    <p>{{ producto.descripcion }}</p>
                    <div class="features">
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>Stock: {{ producto.stock }}</span>
                        </div>
                        {% if producto.pdf %}
                        <div class="feature-item">
                            <span class="check">✓</span>
                            <span>Manual disponible</span>
                        </div>
                        {% endif %}
                    </div>
                    <div class="actions-container">
                        {% if user.is_authenticated %}
                        <form method="post" action="{% url 'vetweb:agregar_a_deseos' producto.id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn-wishlist">
                                <i class="far fa-heart"></i>
                            </button>
                        </form>
                        {% endif %}
                        <a href="{% url 'vetweb:detalle_producto' producto.id %}" class="btn-ver">Ver Detalles</a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>


<style>
/* Contenedor del producto */
.form-product {
    background: rgba(255, 255, 255, 0.9);
    padding: 30px;
    border-radius: 8px;
    border: 1px solid rgba(17, 127, 239, 0.3);
    transition: all 0.3s ease;
    height: 100%;
    display: flex;
    flex-direction: column;
}

.form-product:hover {
    border-color: rgba(17, 127, 239, 0.5);
    box-shadow: 0 0 0 2px rgba(17, 127, 239, 0.1);
}

/* Contenedor de imagen */
.product-img-container {
    width: 100%;
    height: 200px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #f8f9fa;
    padding: 15px;
    border-radius: 4px;
}

/* Imagen del producto */
.product-img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    max-width: 100%;
    max-height: 100%;
}

/* Contenido del producto */
.product-content {
    flex: 1;
    display: flex;
    flex-direction: column;
}

/* Título */
.form-product h2 {
    color: #117fef;
    font-size: 22px;
    margin-bottom: 8px;
    font-weight: 500;
}

/* Descripción */
.form-product p {
    color: #666;
    font-size: 15px;
    margin-bottom: 20px;
}

/* Features */
.features {
    flex: 1;
    margin-bottom: 20px;
}

.feature-item {
    display: flex;
    align-items: center;
    margin-bottom: 12px;
    color: #666;
    font-size: 14px;
}

.check {
    color: #117fef;
    margin-right: 10px;
}

/* Contenedor de acciones */
.actions-container {
    display: flex;
    gap: 10px;
    margin-top: auto;
}

/* Botón wishlist */
.btn-wishlist {
    background: transparent;
    border: 1px solid rgba(17, 127, 239, 0.3);
    color: rgba(17, 127, 239, 0.8);
    width: 44px;
    height: 44px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    cursor: pointer;
    padding: 0;
}

.btn-wishlist:hover {
    background: rgba(17, 127, 239, 0.1);
    border-color: rgba(17, 127, 239, 0.5);
    color: rgba(17, 127, 239, 1);
}

.btn-wishlist i {
    font-size: 18px;
}

/* Botón ver detalles */
.btn-ver {
    flex: 1;
    padding: 12px;
    background: transparent;
    border: 1px solid rgba(17, 127, 239, 0.3);
    color: rgba(17, 127, 239, 0.8);
    font-size: 14px;
    text-align: center;
    text-decoration: none;
    border-radius: 6px;
    transition: all 0.3s ease;
}

.btn-ver:hover {
    background: rgba(17, 127, 239, 0.1);
    border-color: rgba(17, 127, 239, 0.5);
    color: rgba(17, 127, 239, 1);
    text-decoration: none;
}

/* Hero Section */
.hero-slider.product-page {
    height: 500px !important;
    margin-top: 76px;
}

.hero-slider.product-page .carousel-item {
    height: 500px;
}

.hero-slider.product-page .carousel-caption {
    background: linear-gradient(90deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 100%);
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .form-product {
        padding: 20px;
    }
    
    .product-img-container {
        height: 180px;
    }
    
    .form-product h2 {
        font-size: 20px;
    }
}
</style>
{% endblock %}